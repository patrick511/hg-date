!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.HgDate=e():t.HgDate=e()}(this,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var n=/^(\d{4})\D?(\d{2}|)\D?(\d{2}|)\D?(\d{2}|)\D?(\d{2}|)\D?(\d{2}|)\D?(\d{3}|)$/,r=/YYYY|MM|DD|hh|mm|ss|S/g,o={YYYY:9999,MM:12,DD:{"01":31,"02":28,"03":31,"04":30,"05":31,"06":30,"07":31,"08":31,"09":30,10:31,11:30,12:31,"02_leap":29},hh:23,mm:59,ss:59,S:999},s={ms:1,millisecond:1,s:1e3,second:1e3,m:6e4,minute:6e4,h:36e5,hour:36e5,d:864e5,day:864e5,M:-1,month:-1,y:-1,year:-1};function a(t,e,i,n){if(void 0===t&&(t=""),void 0===e&&(e=0),void 0===i&&(i="0"),void 0===n&&(n=!0),1!==i.length)return t;var r=e-t.length;return r>0&&(t=n?new Array(r).fill(i).join("")+t:t+new Array(r).fill(i).join("")),t}function u(t,e,i){return void 0===t&&(t=""),void 0===e&&(e=0),void 0===i&&(i="0"),a(t,e,i,!0)}function h(t){return+t%4==0&&+t%100!=0||+t%400==0}var f=function(){function t(t){var e,i,n,r,o,s,a=t.date,u=void 0===a?null:a,f=t.res,d=void 0===f?[]:f;(d=d.filter(function(t){return!!t})).length>0?(this.YYYY=d[0],e=d[1],this.MM=void 0===e?"01":e,i=d[2],this.DD=void 0===i?"01":i,n=d[3],this.hh=void 0===n?"00":n,r=d[4],this.mm=void 0===r?"00":r,o=d[5],this.ss=void 0===o?"00":o,s=d[6],this.S=void 0===s?"000":s,this.isLeapYear=h(this.YYYY),this.checkValidation()):(u||(u=new Date),this.initInfoByDate(u))}return t.prototype.checkValidation=function(){for(var t in o)if("object"==typeof o[t]){var e=void 0;if(e="02"===this.MM&&this.isLeapYear?o[t][this.MM+"_leap"]:o[t][this.MM],+this[t]>e)throw"out of range "+t+": "+this[t]}else if(+this[t]>o[t])throw"out of range "+t+": "+this[t]},t.prototype.initInfoByDate=function(t){this.YYYY=u(t.getFullYear().toString(),4,"0"),this.MM=u((t.getMonth()+1).toString(),2,"0"),this.DD=u(t.getDate().toString(),2,"0"),this.hh=u(t.getHours().toString(),2,"0"),this.mm=u(t.getMinutes().toString(),2,"0"),this.ss=u(t.getSeconds().toString(),2,"0"),this.S=u(t.getMilliseconds().toString(),3,"0"),this.isLeapYear=h(this.YYYY)},t.prototype.toDate=function(){return new Date(+this.YYYY,+this.MM-1,+this.DD,+this.hh,+this.mm,+this.ss,+this.S)},t.prototype.format=function(t){var e=this;return t.replace(r,function(t){return e[t]})},t.prototype.getCurrentMouthMaxDays=function(){var t=this.MM;return"02"===t&&this.isLeapYear&&(t="02_leap"),o.DD[t]},t.prototype.getCurrentYearsMaxDays=function(){return this.isLeapYear?366:365},t}(),d=function(){function t(t){if(t instanceof Date||"number"==typeof t)this.date=new Date(t);else if("string"==typeof t){var e=n.exec(t);if(!e)throw"pattern error: "+t;e.shift(),this.fmtor=new f({res:e}),this.date=this.fmtor.toDate()}else this.date=new Date;if(this.date&&"Invalid Date"===this.date.toString())throw"Invalid Date: "+t;this.fmtor||(this.fmtor=new f({date:this.date}))}return t.prototype.calUnit=function(t,e){switch(e){case"y":case"year":this.date.setFullYear(this.date.getFullYear()+t);break;case"M":case"month":this.date.setMonth(this.date.getMonth()+t);break;default:var i=s[e];i&&-1!==i&&(this.date=new Date(this.date.getTime()+t*i))}return this.fmtor=new f({date:this.date}),this},t.prototype.toString=function(){return this.date.toString()},t.prototype.getTime=function(){return this.date.getTime()},t.prototype.toDate=function(){return new Date(this.date)},t.prototype.format=function(t){return this.fmtor.format(t)},t.prototype.add=function(t,e){return this.calUnit(t,e)},t.prototype.substract=function(t,e){return this.calUnit(-1*t,e)},t}();e.default=d}]).default});